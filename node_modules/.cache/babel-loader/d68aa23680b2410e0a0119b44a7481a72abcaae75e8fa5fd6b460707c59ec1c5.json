{"ast":null,"code":"import _toConsumableArray from\"/Users/ifloki/Documents/Dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/ifloki/Documents/Dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import EditProfilePopup from\"./EditProfilePopup\";import AddPlacePopup from\"./AddPlacePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import ImagePopup from\"./ImagePopup\";import PopupConfirm from\"./PopupConfirm\";import api from\"../utils/Api\";import CurrentUserContext from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),currentUser=_React$useState10[0],setCurrentUser=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];React.useEffect(function(){api.getUserInfo().then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});},[]);React.useEffect(function(){api.getInitialCards().then(function(res){setCards(_toConsumableArray(res));}).catch(function(err){return console.log(err);});},[]);function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}var handleCardClick=function handleCardClick(card){setSelectedCard(card);};var handleCardLike=function handleCardLike(card){// Проверяем, есть ли уже лайк на этой карточке\nvar isLiked=card.likes.some(function(i){return i._id===currentUser._id;});// Отправляем запрос в API и получаем обновлённые данные карточки\napi.changeLikeCardStatus(card._id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(error){console.log('Ошибка при обновлении статуса лайка:',error);});};var handleCardDelete=function handleCardDelete(card){// Отправляем запрос в API для удаления карточки\napi.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(item){return item._id!==card._id;});});}).catch(function(error){console.log('Ошибка при удалении карточки:',error);});};function handleUpdateUser(data){api.setUserInfo(data).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleUpdateAvatar(data){api.setAvatar(data).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleAddPlaceSubmit(data){api.addCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});}function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setSelectedCard(null);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsx(\"div\",{id:\"root\",className:\"root\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(PopupConfirm,{}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar})]})})});}export default App;","map":{"version":3,"names":["React","Header","Main","Footer","EditProfilePopup","AddPlacePopup","EditAvatarPopup","ImagePopup","PopupConfirm","api","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState3","_React$useState4","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState5","_React$useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_React$useState7","_React$useState8","selectedCard","setSelectedCard","_React$useState9","_React$useState10","currentUser","setCurrentUser","_React$useState11","_React$useState12","cards","setCards","useEffect","getUserInfo","then","data","catch","err","console","log","getInitialCards","res","_toConsumableArray","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleCardClick","card","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","error","handleCardDelete","deleteCard","filter","item","handleUpdateUser","setUserInfo","closeAllPopups","handleUpdateAvatar","setAvatar","handleAddPlaceSubmit","addCard","concat","Provider","value","children","id","className","onEditProfile","onAddPlace","onEditAvatar","onCardClick","onCardLike","onCardDelete","isOpen","onClose","onUpdateUser","onUpdateAvatar"],"sources":["/Users/ifloki/Documents/Dev/mesto-react/src/components/App.js"],"sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport PopupConfirm from \"./PopupConfirm\";\nimport api from \"../utils/Api\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((res) => {\n        setCards([...res]);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  };\n\n  const handleCardLike = (card) => {\n    // Проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n      })\n      .catch((error) => {\n        console.log('Ошибка при обновлении статуса лайка:', error);\n      });\n  };\n\n\n  const handleCardDelete = (card) => {\n    // Отправляем запрос в API для удаления карточки\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((item) => item._id !== card._id));\n      })\n      .catch((error) => {\n        console.log('Ошибка при удалении карточки:', error);\n      });\n  };\n\n  function handleUpdateUser(data) {\n    api\n    .setUserInfo(data)\n    .then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n    })\n    .catch((err) => console.log(err))\n  }\n\n  function handleUpdateAvatar(data) {\n    api\n    .setAvatar(data)\n    .then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n    })\n    .catch((err) => console.log(err))\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n    .addCard(data)\n    .then((newCard) => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    })\n    .catch((err) => console.log(err))\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n  }\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div id=\"root\" className=\"root\">\n        <div className=\"page\">\n          <Header />\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            cards={cards}\n          />\n          <Footer />\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n          <PopupConfirm />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}